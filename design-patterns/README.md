# 设计模式系统学习

## 📚 课程概述

本课程系统讲解 23 种经典设计模式，通过理论讲解、代码实现和实战项目，帮助你掌握面向对象设计的核心思想。

## 🎯 学习目标

- 理解设计模式的六大原则（SOLID + 迪米特法则 + 开闭原则）
- 掌握 23 种 GoF 设计模式的应用场景
- 能够在实际项目中灵活运用设计模式
- 提升代码的可维护性、可扩展性和可复用性

## 📖 课程大纲

本课程精选 **15 种最实用的设计模式**，分为 7 个 Lab，每个 Lab 2-3 种相关模式。

### 创建型模式 (Creational Patterns)

#### Lab 01: 单例模式与工厂模式 ⭐⭐⭐
- **单例模式 (Singleton)** - 全局唯一实例
  - 饿汉式、懒汉式、sync.Once
  - 应用：配置管理、连接池、日志器
- **工厂模式 (Factory)** - 对象创建解耦
  - 简单工厂、工厂方法、抽象工厂
  - 应用：数据库驱动、日志工厂
- **实战**：配置管理器 + 日志工厂

#### Lab 02: 建造者模式与原型模式 ⭐⭐
- **建造者模式 (Builder)** - 复杂对象构建
  - 链式调用、Functional Options
  - 应用：HTTP 请求、SQL 查询构建
- **原型模式 (Prototype)** - 对象克隆
  - 深拷贝、浅拷贝
  - 应用：对象复制、缓存预热
- **实战**：HTTP 请求构建器

### 结构型模式 (Structural Patterns)

#### Lab 03: 适配器、装饰器、代理模式 ⭐⭐⭐
- **适配器模式 (Adapter)** - 接口转换
  - 应用：第三方库集成、接口兼容
- **装饰器模式 (Decorator)** - 动态添加功能
  - 应用：HTTP 中间件、日志、缓存
- **代理模式 (Proxy)** - 控制访问
  - 应用：RPC、缓存代理、权限控制
- **实战**：HTTP 中间件系统

#### Lab 04: 组合、外观、桥接模式 ⭐⭐
- **组合模式 (Composite)** - 树形结构
  - 应用：文件系统、组织架构、UI 组件
- **外观模式 (Facade)** - 简化接口
  - 应用：子系统封装、API 网关
- **桥接模式 (Bridge)** - 抽象与实现分离
  - 应用：跨平台开发、多维度变化
- **实战**：文件系统 + API 网关

### 行为型模式 (Behavioral Patterns)

#### Lab 05: 策略、观察者、模板方法模式 ⭐⭐⭐
- **策略模式 (Strategy)** - 算法族封装
  - 应用：支付方式、排序算法、路由策略
- **观察者模式 (Observer)** - 发布-订阅
  - 应用：事件系统、消息队列、数据绑定
- **模板方法模式 (Template Method)** - 算法骨架
  - 应用：框架设计、流程控制
- **实战**：事件总线系统

#### Lab 06: 状态、命令、责任链模式 ⭐⭐⭐
- **状态模式 (State)** - 状态机
  - 应用：订单状态、游戏状态、工作流
- **命令模式 (Command)** - 请求封装
  - 应用：任务队列、撤销重做、宏命令
- **责任链模式 (Chain of Responsibility)** - 请求处理链
  - 应用：中间件、审批流程、过滤器
- **实战**：订单状态机 + 任务调度器

#### Lab 07: 综合实战与最佳实践 ⭐⭐⭐
- **项目 1**：微服务框架
  - 工厂模式：服务注册
  - 装饰器模式：中间件链
  - 观察者模式：事件系统
  - 策略模式：负载均衡
- **项目 2**：Web 框架
  - 建造者模式：路由构建
  - 责任链模式：中间件
  - 模板方法模式：请求处理
- **项目 3**：缓存系统
  - 单例模式：缓存管理器
  - 代理模式：缓存代理
  - 策略模式：淘汰策略
- **最佳实践**：
  - 如何选择合适的设计模式
  - 设计模式的组合使用
  - 避免过度设计
  - Go 语言特有的模式

## 🗂️ 目录结构

```
design-patterns/
├── README.md                                    # 本文件
│
├── lab01-创建型模式-单例与工厂/                  ⭐⭐⭐ 最重要
│   ├── README.md                               # Lab 说明
│   ├── theory/                                 # 理论讲解
│   │   ├── 01-singleton.md                     # 单例模式
│   │   ├── 02-factory.md                       # 工厂模式
│   │   └── 03-design-principles.md             # 设计原则
│   ├── examples/                               # 示例代码
│   │   ├── singleton/                          # 单例示例
│   │   └── factory/                            # 工厂示例
│   ├── exercises/                              # 练习题
│   └── project/                                # 实战项目
│       ├── config-manager/                     # 配置管理器
│       └── logger-factory/                     # 日志工厂
│
├── lab02-创建型模式-建造者与原型/                ⭐⭐
│   ├── README.md
│   ├── theory/
│   ├── examples/
│   ├── exercises/
│   └── project/
│
├── lab03-结构型模式-适配器装饰器代理/            ⭐⭐⭐ 最重要
│   ├── README.md
│   ├── theory/
│   ├── examples/
│   ├── exercises/
│   └── project/
│
├── lab04-结构型模式-组合外观桥接/                ⭐⭐
│   ├── README.md
│   ├── theory/
│   ├── examples/
│   ├── exercises/
│   └── project/
│
├── lab05-行为型模式-策略观察者模板/              ⭐⭐⭐ 最重要
│   ├── README.md
│   ├── theory/
│   ├── examples/
│   ├── exercises/
│   └── project/
│
├── lab06-行为型模式-状态命令责任链/              ⭐⭐⭐ 最重要
│   ├── README.md
│   ├── theory/
│   ├── examples/
│   ├── exercises/
│   └── project/
│
└── lab07-综合实战与最佳实践/                     ⭐⭐⭐ 最重要
    ├── README.md
    ├── project1-microservice-framework/        # 微服务框架
    ├── project2-web-framework/                 # Web 框架
    ├── project3-cache-system/                  # 缓存系统
    └── best-practices/                         # 最佳实践
        ├── pattern-selection.md                # 模式选择
        ├── pattern-combination.md              # 模式组合
        └── go-specific-patterns.md             # Go 特有模式
```

## 🚀 快速开始

### 前置要求

- Go 1.21+ 或 Java 11+ 或 Python 3.8+
- 基础的面向对象编程知识
- 了解接口、继承、多态等概念

### 学习路径

**🟢 快速入门路径** (20-25 小时)
- 适合：快速了解核心模式
- 内容：Lab 01, 03, 05, 06（只学习最重要的模式）
- 目标：掌握 8-10 种最常用的模式

**🟡 系统学习路径** (40-50 小时) - 推荐
- 适合：系统掌握设计模式
- 内容：完成所有 7 个 Lab
- 目标：掌握 15 种实用模式 + 综合应用

**🔴 深度研究路径** (60-80 小时)
- 适合：成为设计模式专家
- 内容：系统学习 + 源码分析 + 重构实践
- 目标：能够设计复杂系统，指导团队

### 学习建议

1. **理论与实践结合**：每学习一个模式，立即编写代码实现
2. **对比分析**：对比不同模式的适用场景和优缺点
3. **重构练习**：找一段代码，尝试用设计模式重构
4. **阅读源码**：分析知名框架中的设计模式应用
5. **记录笔记**：记录每个模式的使用场景和注意事项

## 📊 学习进度跟踪

| Lab | 模式 | 重要性 | 预计时间 | 状态 | 完成时间 |
|-----|------|--------|----------|------|----------|
| 01 | 单例、工厂 | ⭐⭐⭐ | 6-8h | ⬜ 未开始 | - |
| 02 | 建造者、原型 | ⭐⭐ | 4-6h | ⬜ 未开始 | - |
| 03 | 适配器、装饰器、代理 | ⭐⭐⭐ | 8-10h | ⬜ 未开始 | - |
| 04 | 组合、外观、桥接 | ⭐⭐ | 6-8h | ⬜ 未开始 | - |
| 05 | 策略、观察者、模板 | ⭐⭐⭐ | 8-10h | ⬜ 未开始 | - |
| 06 | 状态、命令、责任链 | ⭐⭐⭐ | 8-10h | ⬜ 未开始 | - |
| 07 | 综合实战 | ⭐⭐⭐ | 10-15h | ⬜ 未开始 | - |

**总计**: 50-67 小时（根据学习路径不同）

## 🎓 设计原则

在学习设计模式之前，先理解这些设计原则：

### SOLID 原则

1. **单一职责原则 (SRP)**
   - 一个类只负责一个功能领域
   - 降低类的复杂度，提高可读性

2. **开闭原则 (OCP)**
   - 对扩展开放，对修改关闭
   - 通过抽象实现稳定性

3. **里氏替换原则 (LSP)**
   - 子类可以替换父类
   - 保证继承的正确性

4. **接口隔离原则 (ISP)**
   - 客户端不应依赖不需要的接口
   - 接口应该小而专一

5. **依赖倒置原则 (DIP)**
   - 依赖抽象而非具体实现
   - 高层模块不依赖低层模块

### 其他原则

6. **迪米特法则 (LoD)**
   - 最少知识原则
   - 降低类之间的耦合

7. **合成复用原则 (CRP)**
   - 优先使用组合而非继承
   - 提高灵活性

## 📚 推荐资源

### 书籍
- 《设计模式：可复用面向对象软件的基础》（GoF）
- 《Head First 设计模式》
- 《重构：改善既有代码的设计》
- 《代码整洁之道》

### 在线资源
- [Refactoring.Guru](https://refactoring.guru/design-patterns)
- [SourceMaking](https://sourcemaking.com/design_patterns)
- [Design Patterns in Go](https://github.com/tmrts/go-patterns)

### 开源项目
- Spring Framework (Java)
- Gin Web Framework (Go)
- Django (Python)
- React (JavaScript)

## 💡 常见问题

### Q1: 设计模式是银弹吗？
不是。设计模式是解决特定问题的方案，过度使用会导致代码复杂化。

### Q2: 什么时候使用设计模式？
当你遇到重复的设计问题，且该模式能简化解决方案时。

### Q3: 如何选择合适的设计模式？
1. 分析问题的本质
2. 确定变化点
3. 选择能够封装变化的模式

### Q4: Go 语言如何实现设计模式？
Go 语言没有类和继承，但可以通过接口、组合和函数实现大部分模式。

## 🎯 学习目标检查

完成本课程后，你应该能够：

- [ ] 说出 23 种设计模式的名称和分类
- [ ] 解释每种模式的意图和适用场景
- [ ] 用代码实现每种模式
- [ ] 识别开源项目中的设计模式
- [ ] 在实际项目中应用设计模式
- [ ] 重构代码以应用设计模式
- [ ] 评估设计模式的优缺点
- [ ] 组合使用多种设计模式

## 📞 获取帮助

- 查看每个 Lab 的 README.md
- 参考 examples/ 目录的示例代码
- 查看 exercises/ 目录的练习答案
- 阅读推荐的书籍和在线资源

---

**开始学习**: 从 [Lab 01](./lab01-创建型模式-单例与工厂/README.md) 开始你的设计模式之旅！

**祝学习愉快！** 🎉
