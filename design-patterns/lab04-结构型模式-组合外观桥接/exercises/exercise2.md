# 练习 2: 智能家居控制器 (外观模式)

## 难度
⭐⭐ (中等)

## 学习目标
- 掌握外观模式的实现
- 理解如何简化复杂子系统的接口
- 学会封装多个子系统的协调逻辑

## 问题描述

设计并实现一个智能家居控制系统，简化对多个智能设备的控制。系统包含以下设备：
- 灯光系统（客厅灯、卧室灯、厨房灯）
- 空调系统
- 窗帘系统
- 音响系统
- 安防系统（门锁、摄像头、报警器）

用户希望通过简单的命令控制多个设备，而不需要逐个操作每个设备。

## 功能要求

### 1. 子系统实现

实现以下子系统：

**灯光系统 (LightingSystem)**
- `TurnOn(room string)` - 打开指定房间的灯
- `TurnOff(room string)` - 关闭指定房间的灯
- `SetBrightness(room string, level int)` - 设置亮度 (0-100)
- `SetColor(room string, color string)` - 设置灯光颜色

**空调系统 (AirConditioner)**
- `TurnOn()` - 开启空调
- `TurnOff()` - 关闭空调
- `SetTemperature(temp int)` - 设置温度
- `SetMode(mode string)` - 设置模式（制冷/制热/除湿）

**窗帘系统 (CurtainSystem)**
- `Open(room string)` - 打开窗帘
- `Close(room string)` - 关闭窗帘
- `SetPosition(room string, position int)` - 设置窗帘位置 (0-100)

**音响系统 (AudioSystem)**
- `TurnOn()` - 开启音响
- `TurnOff()` - 关闭音响
- `SetVolume(level int)` - 设置音量
- `PlayMusic(song string)` - 播放音乐

**安防系统 (SecuritySystem)**
- `Arm()` - 布防
- `Disarm()` - 撤防
- `LockDoors()` - 锁门
- `UnlockDoors()` - 开门
- `EnableCameras()` - 启用摄像头
- `DisableCameras()` - 禁用摄像头

### 2. 外观类实现

实现 `SmartHomeFacade` 外观类，提供以下高层接口：

**场景模式**
- `GoodMorning()` - 早安模式
  - 打开卧室窗帘
  - 打开卧室灯（亮度 50%）
  - 播放轻音乐
  - 设置空调为舒适温度

- `LeaveHome()` - 离家模式
  - 关闭所有灯光
  - 关闭空调
  - 关闭音响
  - 关闭所有窗帘
  - 锁门并布防

- `ComeHome()` - 回家模式
  - 撤防并开门
  - 打开客厅灯
  - 打开空调
  - 打开客厅窗帘

- `MovieMode()` - 观影模式
  - 关闭客厅灯
  - 关闭窗帘
  - 打开音响
  - 设置音响音量

- `SleepMode()` - 睡眠模式
  - 关闭所有灯光
  - 关闭音响
  - 关闭窗帘
  - 设置空调为睡眠温度
  - 布防

- `PartyMode()` - 派对模式
  - 打开所有灯光（彩色模式）
  - 打开音响（高音量）
  - 打开窗帘
  - 关闭安防

### 3. 自定义场景

支持用户自定义场景，保存和加载场景配置。

## 输入输出示例

### 示例 1: 早安模式

**输入**:
```go
smartHome := NewSmartHomeFacade()
smartHome.GoodMorning()
```

**输出**:
```
🌅 执行早安模式
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  [窗帘系统] 打开卧室窗帘
  [灯光系统] 打开卧室灯，亮度设置为 50%
  [音响系统] 开启音响
  [音响系统] 播放音乐: 轻音乐
  [音响系统] 设置音量为 20
  [空调系统] 开启空调
  [空调系统] 设置温度为 24°C
  [空调系统] 设置模式为 制冷
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 早安模式执行完成
```

### 示例 2: 离家模式

**输入**:
```go
smartHome.LeaveHome()
```

**输出**:
```
🚪 执行离家模式
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  [灯光系统] 关闭客厅灯
  [灯光系统] 关闭卧室灯
  [灯光系统] 关闭厨房灯
  [空调系统] 关闭空调
  [音响系统] 关闭音响
  [窗帘系统] 关闭客厅窗帘
  [窗帘系统] 关闭卧室窗帘
  [安防系统] 锁定所有门
  [安防系统] 启用摄像头
  [安防系统] 系统布防
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 离家模式执行完成，家已安全
```

### 示例 3: 观影模式

**输入**:
```go
smartHome.MovieMode()
```

**输出**:
```
🎬 执行观影模式
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  [灯光系统] 关闭客厅灯
  [窗帘系统] 关闭客厅窗帘
  [音响系统] 开启音响
  [音响系统] 设置音量为 60
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 观影模式执行完成，尽情享受电影吧！
```

## 提示

💡 **提示 1**: 外观模式的核心是提供简化的高层接口，隐藏子系统的复杂性。

💡 **提示 2**: 外观类应该持有所有子系统的引用，并在高层方法中协调它们的操作。

💡 **提示 3**: 每个场景模式应该按照合理的顺序调用子系统的方法，模拟真实的使用场景。

💡 **提示 4**: 外观类不应该包含业务逻辑，只负责委派和协调。

💡 **提示 5**: 客户端仍然可以直接访问子系统，外观只是提供了一种便捷方式。

## 评分标准

- [ ] **功能完整性 (40%)**
  - 正确实现所有子系统
  - 实现所有场景模式
  - 场景模式的操作顺序合理
  - 输出信息清晰

- [ ] **代码质量 (30%)**
  - 代码结构清晰
  - 命名规范
  - 适当的注释
  - 遵循 Go 语言编码规范

- [ ] **设计模式应用 (20%)**
  - 正确应用外观模式
  - 外观类职责单一
  - 子系统独立性好
  - 客户端代码简洁

- [ ] **用户体验 (10%)**
  - 场景模式设计合理
  - 输出信息友好
  - 操作流程自然

## 扩展挑战

如果你完成了基本要求，可以尝试以下扩展功能：

1. **自定义场景**
   - 允许用户创建自定义场景
   - 保存场景配置到文件
   - 从文件加载场景配置

2. **定时任务**
   - 支持定时执行场景（如：每天 7 点执行早安模式）
   - 支持条件触发（如：温度高于 30 度自动开空调）

3. **语音控制**
   - 模拟语音识别
   - 支持自然语言命令（如："小智，我要睡觉了"）

4. **状态查询**
   - 查询所有设备的当前状态
   - 生成状态报告

5. **能源管理**
   - 统计各设备的能耗
   - 提供节能建议
   - 生成能耗报告

6. **多用户支持**
   - 支持多个用户配置
   - 每个用户有自己的场景偏好
   - 用户权限管理
