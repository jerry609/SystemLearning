# Â§0.1.2 è¿›é˜¶éƒ¨åˆ†è¯´æ˜

## ğŸ“– å­¦ä¹ ç›®æ ‡

åœ¨åŸºç¡€éƒ¨åˆ†çš„åŸºç¡€ä¸Šï¼ŒæŒæ¡æ›´å¤æ‚çš„æšä¸¾æŠ€å·§ï¼š
- æ¨¡è¿ç®—åœ¨æšä¸¾ä¸­çš„åº”ç”¨
- å¤šå…ƒç»„é—®é¢˜çš„ä¼˜åŒ–æ–¹æ³•
- åˆ†ç»„é™ä½å¤æ‚åº¦
- ç‰¹å¾æå–å’Œå“ˆå¸Œ

## ğŸ’¡ æ ¸å¿ƒæŠ€å·§

### æŠ€å·§1: æ¨¡è¿ç®—
å¯¹äº"å’Œå¯è¢« k æ•´é™¤"çš„é—®é¢˜ï¼š
```python
freq = [0] * k
for x in nums:
    # å…³é”®ï¼š(k - x % k) % k å¤„ç†ä½™æ•°ä¸º 0 çš„æƒ…å†µ
    need = (k - x % k) % k
    count += freq[need]
    freq[x % k] += 1
```

### æŠ€å·§2: åˆ†ç»„å¤„ç†
å¯¹äºå››ä¸ªå˜é‡çš„é—®é¢˜ï¼Œåˆ†æˆä¸¤ç»„ï¼š
```python
# O(n^4) â†’ O(n^2)
# ç¬¬ä¸€ç»„ï¼šA + B çš„æ‰€æœ‰å¯èƒ½
# ç¬¬äºŒç»„ï¼šæšä¸¾ C + Dï¼ŒæŸ¥æ‰¾ -(C + D)
```

### æŠ€å·§3: ç‰¹å¾æå–
å°†å¤æ‚å¯¹è±¡è½¬æ¢ä¸ºå¯å“ˆå¸Œçš„ç‰¹å¾ï¼š
```python
# å­—ç¬¦é›†åˆ â†’ frozenset(word)
# æ¯”ä¾‹ â†’ (w/gcd, h/gcd)
# æ•°ä½å’Œ â†’ sum(int(d) for d in str(x))
```

## ğŸ“ å­¦ä¹ è·¯çº¿

### ç¬¬ä¸€æ­¥ï¼šæŒæ¡æ¨¡è¿ç®—
**[1010. æ€»æŒç»­æ—¶é—´å¯è¢« 60 æ•´é™¤çš„æ­Œæ›²](https://leetcode.cn/problems/pairs-of-songs-with-total-durations-divisible-by-60/)** â­â­â­â­

**å…³é”®ç‚¹**:
1. è½¬æ¢é—®é¢˜ï¼š`(a + b) % 60 == 0` â†’ `a % 60 + b % 60 == 0 æˆ– 60`
2. å¯¹äºå½“å‰å…ƒç´  `t`ï¼Œéœ€è¦æ‰¾ `(60 - t % 60) % 60`
3. ç”¨æ•°ç»„ä»£æ›¿å“ˆå¸Œè¡¨ï¼šä½™æ•°èŒƒå›´å›ºå®š

**æ˜“é”™ç‚¹**:
- å¿˜è®°å¤„ç† `t % 60 == 0` çš„æƒ…å†µ
- åº”è¯¥æ˜¯ `(60 - t % 60) % 60` è€Œä¸æ˜¯ `60 - t % 60`

### ç¬¬äºŒæ­¥ï¼šç†è§£åˆ†ç»„æ€æƒ³
**[454. å››æ•°ç›¸åŠ  II](https://leetcode.cn/problems/4sum-ii/)** â­â­â­â­

**å…³é”®ç‚¹**:
1. æš´åŠ›æšä¸¾å››å±‚å¾ªç¯ï¼šO(n^4)
2. ä¼˜åŒ–ï¼šåˆ†æˆä¸¤ç»„ï¼Œæ¯ç»„æšä¸¾ä¸¤å±‚ï¼šO(n^2)
3. ç¬¬ä¸€ç»„è®¡ç®—æ‰€æœ‰ `A[i] + B[j]`
4. ç¬¬äºŒç»„æšä¸¾ `C[k] + D[l]`ï¼ŒæŸ¥æ‰¾ `-(C[k] + D[l])`

**å¤æ‚åº¦**:
- æ—¶é—´ï¼šO(n^2)
- ç©ºé—´ï¼šO(n^2)

### ç¬¬ä¸‰æ­¥ï¼šç‰¹å¾æå–
**[2506. ç»Ÿè®¡ç›¸ä¼¼å­—ç¬¦ä¸²å¯¹çš„æ•°ç›®](https://leetcode.cn/problems/count-pairs-of-similar-strings/)**

**å…³é”®ç‚¹**:
- ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ä¼¼ âŸº å­—ç¬¦é›†åˆç›¸åŒ
- æå–ç‰¹å¾ï¼š`frozenset(word)` æˆ–æ’åºåçš„å­—ç¬¦ä¸²
- ç”¨ç‰¹å¾ä½œä¸ºå“ˆå¸Œé”®ç»Ÿè®¡

### ç¬¬å››æ­¥ï¼šå¤šå…ƒç»„ä¼˜åŒ–
**[1995. ç»Ÿè®¡ç‰¹æ®Šå››å…ƒç»„](https://leetcode.cn/problems/count-special-quadruplets/)**

**ä¼˜åŒ–æ€è·¯**:
1. æš´åŠ›ï¼šå››å±‚å¾ªç¯ O(n^4)
2. ä¼˜åŒ–1ï¼šæšä¸¾ a, b, cï¼Œç”¨å“ˆå¸Œè¡¨æŸ¥æ‰¾ dï¼šO(n^3)
3. ä¼˜åŒ–2ï¼šå€’åºæšä¸¾ cï¼Œè¾¹æ›´æ–° d çš„å“ˆå¸Œè¡¨è¾¹æšä¸¾ a, b

## ğŸ“Š éš¾åº¦æ¢¯åº¦

### å…¥é—¨è¿›é˜¶
- 1010. æ€»æŒç»­æ—¶é—´å¯è¢« 60 æ•´é™¤çš„æ­Œæ›²
- 3185. æ„æˆæ•´å¤©çš„ä¸‹æ ‡å¯¹æ•°ç›® II
- 2748. ç¾ä¸½ä¸‹æ ‡å¯¹çš„æ•°ç›®
- 2506. ç»Ÿè®¡ç›¸ä¼¼å­—ç¬¦ä¸²å¯¹çš„æ•°ç›®

### ä¸­ç­‰è¿›é˜¶
- 2874. æœ‰åºä¸‰å…ƒç»„ä¸­çš„æœ€å¤§å€¼ II
- 1031. ä¸¤ä¸ªæ— é‡å å­æ•°ç»„çš„æœ€å¤§å’Œ
- 1995. ç»Ÿè®¡ç‰¹æ®Šå››å…ƒç»„
- 454. å››æ•°ç›¸åŠ  II

### é«˜çº§è¿›é˜¶
- 2555. ä¸¤ä¸ªçº¿æ®µè·å¾—çš„æœ€å¤šå¥–å“ (2081)
- 3404. ç»Ÿè®¡ç‰¹æ®Šå­åºåˆ—çš„æ•°ç›® (2445)
- 3267. ç»Ÿè®¡è¿‘ä¼¼ç›¸ç­‰æ•°å¯¹ II (2545)
- 3480. åˆ é™¤ä¸€ä¸ªå†²çªå¯¹åæœ€å¤§å­æ•°ç»„æ•°ç›® (2764)

## ğŸ’­ è§£é¢˜æ¨¡å¼æ€»ç»“

### æ¨¡å¼1: æ¨¡è¿ç®—è®¡æ•°
```python
def count_pairs_divisible_by_k(nums, k):
    count = 0
    freq = [0] * k
    for x in nums:
        need = (k - x % k) % k
        count += freq[need]
        freq[x % k] += 1
    return count
```

### æ¨¡å¼2: ç‰¹å¾å“ˆå¸Œ
```python
def count_similar_objects(objects):
    count = 0
    freq = {}
    for obj in objects:
        key = extract_feature(obj)  # æå–ç‰¹å¾
        count += freq.get(key, 0)
        freq[key] = freq.get(key, 0) + 1
    return count
```

### æ¨¡å¼3: åˆ†ç»„ä¼˜åŒ–
```python
def four_sum_type(nums1, nums2, nums3, nums4, target):
    # åˆ†ç»„1: nums1 + nums2
    group1 = {}
    for a in nums1:
        for b in nums2:
            group1[a + b] = group1.get(a + b, 0) + 1
    
    # åˆ†ç»„2: nums3 + nums4ï¼ŒæŸ¥æ‰¾
    count = 0
    for c in nums3:
        for d in nums4:
            count += group1.get(target - c - d, 0)
    return count
```

### æ¨¡å¼4: å€’åºç»´æŠ¤
```python
def optimize_four_elements(nums):
    n = len(nums)
    count = 0
    freq = {}  # ç»´æŠ¤å³ä¾§çš„å…ƒç´ 
    
    # å€’åºæšä¸¾ä¸­é—´å…ƒç´ 
    for c in range(n - 1, 1, -1):
        # æ›´æ–°å³ä¾§
        for d in range(c + 1, n):
            freq[nums[d]] = freq.get(nums[d], 0) + 1
        
        # æšä¸¾å·¦ä¾§
        for a in range(c):
            for b in range(a + 1, c):
                target = calculate_target(nums[a], nums[b], nums[c])
                count += freq.get(target, 0)
    
    return count
```

## ğŸ” è°ƒè¯•æŠ€å·§

1. **æ¨¡è¿ç®—é—®é¢˜**:
   ```python
   # æµ‹è¯• (k - x % k) % k æ˜¯å¦æ­£ç¡®
   for x in range(2 * k):
       need = (k - x % k) % k
       assert (x + need) % k == 0
   ```

2. **ç‰¹å¾æå–**:
   ```python
   # éªŒè¯ç‰¹å¾æ˜¯å¦æ­£ç¡®è¡¨ç¤ºå¯¹è±¡
   obj1, obj2 = similar_objects
   assert extract_feature(obj1) == extract_feature(obj2)
   ```

3. **åˆ†ç»„ä¼˜åŒ–**:
   ```python
   # å¯¹æ¯”æš´åŠ›å’Œä¼˜åŒ–ç»“æœ
   assert brute_force(nums) == optimized(nums)
   ```

## ğŸ”— ä¸‹ä¸€æ­¥

å®Œæˆè¿›é˜¶é¢˜ç›®åï¼Œç»§ç»­å­¦ä¹  [Â§0.2 æšä¸¾ä¸­é—´](../../enumerate-middle/README.md)
