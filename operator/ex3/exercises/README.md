# 练习说明文档

这个目录包含所有练习的详细说明文档。

## 练习列表

### ✅ 练习 1: 状态机与基础协调循环

**文件**: `1.md`

**学习目标**:
- 理解 Kubernetes Operator 的协调循环
- 实现状态机引擎
- 掌握 Finalizer 机制
- 实现状态转换逻辑

**关键概念**:
- 状态机模式
- Reconciliation Loop
- Finalizer 生命周期
- 事件记录

**预计时间**: 1-2 小时

---

### ✅ 练习 2: 资源创建与管理

**文件**: `2.md`

**学习目标**:
- 创建和管理 Deployment
- 创建和管理 Service
- 实现 OwnerReference
- 检查资源就绪性

**关键概念**:
- 资源的幂等性创建
- OwnerReference 机制
- 资源状态检查
- 依赖资源管理

**预计时间**: 2-3 小时

---

### ✅ 练习 3: 更新与同步逻辑

**文件**: `3.md`

**学习目标**:
- 处理 Spec 变更
- 实现资源同步
- Generation 跟踪
- 配置漂移检测

**关键概念**:
- Generation vs ObservedGeneration
- 深度比较
- 配置漂移处理
- 滚动更新

**预计时间**: 2-3 小时

---

### ✅ 练习 4: 删除与 Finalizer

**文件**: `4.md`

**学习目标**:
- 实现完整的删除流程
- Finalizer 清理逻辑
- 优雅删除
- 资源清理顺序

**关键概念**:
- DeletionTimestamp
- Finalizer 移除
- 级联删除
- 清理顺序

**预计时间**: 1-2 小时

---

### ✅ 练习 5: 错误处理与可观测性

**文件**: `5.md`

**学习目标**:
- 错误分类和处理
- 实现重试策略
- Status Conditions
- 可观测性增强

**关键概念**:
- 错误分类（临时 vs 永久）
- 指数退避
- Condition 管理
- Trace 装饰器

**预计时间**: 2-3 小时

---

## 学习路径

### 推荐顺序

1. **练习 1** → 基础（必须完成）
2. **练习 2** → 核心功能
3. **练习 3** → 高级功能
4. **练习 4** → 生命周期管理
5. **练习 5** → 生产级特性

### 学习方法

1. **阅读文档** (15-20 分钟)
   - 理解背景知识
   - 了解任务要求
   - 查看示例代码

2. **动手实现** (60-90 分钟)
   - 在 `framework/` 中编写代码
   - 运行测试验证
   - 调试和修复问题

3. **对比学习** (15-20 分钟)
   - 查看参考答案
   - 理解实现差异
   - 学习最佳实践

4. **总结反思** (10 分钟)
   - 记录学到的知识点
   - 思考可以改进的地方
   - 准备下一个练习

## 文档结构

每个练习文档包含：

- **学习目标**: 这个练习要达到的目标
- **背景知识**: 需要了解的概念和原理
- **任务说明**: 具体要实现的功能
- **实现步骤**: 分步骤的实现指导
- **测试场景**: 如何验证实现
- **预期输出**: 正确实现后的输出示例
- **验证清单**: 完成度检查
- **关键要点**: 重要的知识点总结
- **常见问题**: FAQ 和解答
- **下一步**: 后续练习的引导

## 使用技巧

### 1. 先理解再实现

不要急于写代码，先理解：
- 为什么需要这个功能？
- 它在整个系统中的作用是什么？
- 有哪些边界情况需要考虑？

### 2. 增量开发

不要一次实现所有功能：
- 先实现最简单的版本
- 运行测试验证
- 逐步添加功能
- 持续测试和重构

### 3. 善用日志

添加详细的日志输出：
- 记录关键步骤
- 输出重要变量
- 帮助调试问题

### 4. 参考但不抄袭

查看参考答案时：
- 理解实现思路
- 学习代码风格
- 但要用自己的方式实现

## 获取帮助

如果遇到问题：

1. **查看文档**: 仔细阅读练习说明
2. **运行测试**: 测试输出会提供线索
3. **查看日志**: 日志可以帮助定位问题
4. **参考答案**: 对比你的实现和参考答案
5. **理解原理**: 回到背景知识部分

## 完成标准

每个练习完成后应该：

- ✅ 所有功能正确实现
- ✅ 测试全部通过
- ✅ 代码清晰易读
- ✅ 有适当的注释
- ✅ 日志输出合理
- ✅ 理解实现原理

## 下一步

从 [练习 1: 状态机与基础协调循环](./1.md) 开始你的学习之旅！

祝你学习愉快！🎓
